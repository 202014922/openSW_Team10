package com.travelmatcher.controller;

import com.travelmatcher.model.Schedule;
import com.travelmatcher.service.ScheduleService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.security.Principal;
import java.util.List;

@RestController
@RequestMapping("/api/schedule")
@CrossOrigin(origins = "*", allowCredentials = "true")
public class ScheduleController {
    @Autowired
    private ScheduleService scheduleService;

    @PostMapping("/add")
    public List<Schedule> addSchedules(Principal principal, @RequestBody List<ScheduleRequest> requests) {
        return scheduleService.addSchedules(principal.getName(), requests);
    }

    static class ScheduleRequest {
        private String date;

        public String getDate() {
            return date;
        }

        public void setDate(String date) {
            this.date = date;
        }
    }
}